<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Student Dashboard - Jobs & Internships</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap');

  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    min-height: 100vh;
    font-family: 'Nunito', sans-serif;
    background: linear-gradient(135deg, #4e54c8, #8f94fb);
    color: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 16px;
  }

  .dashboard-container {
    background: #fff;
    width: 100%;
    max-width: 350px;
    max-height: 600px;
    border-radius: 14px;
    box-shadow: 0 16px 32px rgba(0,0,0,0.25);
    padding: 20px 16px 24px 16px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  header {
    margin-bottom: 18px;
    text-align: center;
  }

  header h1 {
    margin: 0;
    font-size: 1.7rem;
    font-weight: 700;
    color: #4e54c8;
  }
  header p {
    margin: 4px 0 0 0;
    font-size: 1rem;
    color: #555;
  }

  .tabs {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-bottom: 16px;
  }

  .tab-btn {
    flex: 1;
    padding: 10px 0;
    font-weight: 600;
    color: #555;
    background: #f3f3f3;
    border: 2px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
  }
  .tab-btn.active {
    background: #4e54c8;
    color: white;
    border-color: #373acc;
    box-shadow: 0 6px 14px rgba(78,84,200,0.7);
  }

  section {
    flex: 1;
    overflow-y: auto;
    padding-right: 6px; /* For scrollbar clearance */
  }

  ul.listings {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  ul.listings li {
    border: 1.8px solid #ddd;
    border-radius: 12px;
    padding: 14px 16px;
    margin-bottom: 14px;
    background: #fafafa;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }

  ul.listings li > div {
    flex: 1;
  }

  ul.listings li .title {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 6px;
    color: #4e54c8;
  }
  ul.listings li .company {
    font-size: 0.9rem;
    color: #666;
    font-style: italic;
  }

  button.apply-btn {
    background-color: #4e54c8;
    border: none;
    color: white;
    font-weight: 700;
    padding: 8px 14px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button.apply-btn:hover:not(:disabled) {
    background-color: #373acc;
  }
  button.apply-btn:disabled {
    background-color: #aaa;
    cursor: not-allowed;
  }

  .status-section {
    margin-top: 24px;
  }

  .status-section h2 {
    font-size: 1.3rem;
    color: #4e54c8;
    margin-bottom: 14px;
    text-align: center;
  }

  ul.application-status {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  ul.application-status li {
    border-radius: 12px;
    padding: 12px 16px;
    margin-bottom: 12px;
    background: #f5f5ff;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    gap: 14px;
    font-size: 0.95rem;
    color: #222;
  }

  .status-pending {
    color: #e09e00;
    font-weight: 700;
  }
  .status-accepted {
    color: #22863a;
    font-weight: 700;
  }
  .status-rejected {
    color: #d93025;
    font-weight: 700;
  }

  /* Scrollbar styling */
  section::-webkit-scrollbar {
    width: 6px;
  }
  section::-webkit-scrollbar-track {
    background: #eaeaea;
    border-radius: 10px;
  }
  section::-webkit-scrollbar-thumb {
    background: #4e54c8;
    border-radius: 10px;
  }

</style>
</head>
<body>
  <main class="dashboard-container" role="main" aria-label="Student Dashboard Jobs and Internships">
    <header>
      <h1>Welcome, Student!</h1>
      <p>Explore Jobs & Internships</p>
    </header>

    <nav class="tabs" role="tablist" aria-label="Job and Internship Tabs">
      <button class="tab-btn active" id="tab-jobs" role="tab" aria-selected="true" aria-controls="panel-jobs" tabindex="0">
        Jobs
      </button>
      <button class="tab-btn" id="tab-internships" role="tab" aria-selected="false" aria-controls="panel-internships" tabindex="-1">
        Internships
      </button>
    </nav>

    <section id="panel-jobs" role="tabpanel" aria-labelledby="tab-jobs" tabindex="0">
      <ul class="listings" id="jobs-list">
        <!-- Job items added dynamically -->
      </ul>
    </section>

    <section id="panel-internships" role="tabpanel" aria-labelledby="tab-internships" tabindex="0" hidden>
      <ul class="listings" id="internships-list">
        <!-- Internship items added dynamically -->
      </ul>
    </section>

    <section class="status-section" aria-label="Application Status Section">
      <h2>Your Applications</h2>
      <ul class="application-status" id="application-status-list">
        <li>No applications yet.</li>
      </ul>
    </section>
  </main>

<script>
  (function(){
    const jobs = [
      { id: 'job1', title: 'Frontend Developer', company: 'Tech Solutions Inc.' },
      { id: 'job2', title: 'Backend Engineer', company: 'Innovatech LLC' },
      { id: 'job3', title: 'Data Analyst', company: 'DataInsight Corp.' },
      { id: 'job4', title: 'UI/UX Designer', company: 'Creative Minds Studio' }
    ];

    const internships = [
      { id: 'intern1', title: 'Marketing Intern', company: 'Bright Media' },
      { id: 'intern2', title: 'HR Intern', company: 'PeopleFirst' },
      { id: 'intern3', title: 'Software Intern', company: 'CodeCraft' },
      { id: 'intern4', title: 'Finance Intern', company: 'Money Matters' }
    ];

    const tabJobsBtn = document.getElementById('tab-jobs');
    const tabInternshipsBtn = document.getElementById('tab-internships');
    const jobsPanel = document.getElementById('panel-jobs');
    const internshipsPanel = document.getElementById('panel-internships');
    const jobsListEl = document.getElementById('jobs-list');
    const internshipsListEl = document.getElementById('internships-list');

    const applicationStatusList = document.getElementById('application-status-list');

    let applications = JSON.parse(localStorage.getItem('applications')) || {};

    // Render listings for jobs or internships
    function renderListings(list, container) {
      container.innerHTML = '';
      list.forEach(item => {
        const li = document.createElement('li');
        li.setAttribute('data-id', item.id);
        li.innerHTML = `
          <div>
            <div class="title">${item.title}</div>
            <div class="company">${item.company}</div>
          </div>
          <button class="apply-btn" ${applications[item.id] ? 'disabled' : ''}>
            ${applications[item.id] ? 'Applied' : 'Apply'}
          </button>
        `;
        const applyBtn = li.querySelector('.apply-btn');
        applyBtn.addEventListener('click', () => applyForPosition(item));
        container.appendChild(li);
      });
    }

    function applyForPosition(position) {
      if (applications[position.id]) return; // Already applied

      // Simulate application result randomly: Pending
      applications[position.id] = {
        title: position.title,
        company: position.company,
        status: 'Pending'
      };

      saveApplications();
      refreshUI();
    }

    function saveApplications() {
      localStorage.setItem('applications', JSON.stringify(applications));
    }

    function refreshUI() {
      renderListings(jobs, jobsListEl);
      renderListings(internships, internshipsListEl);
      renderApplicationStatus();
    }

    function renderApplicationStatus() {
      applicationStatusList.innerHTML = '';

      let keys = Object.keys(applications);
      if (keys.length === 0) {
        applicationStatusList.innerHTML = '<li>No applications yet.</li>';
        return;
      }

      keys.forEach(id => {
        let app = applications[id];
        let statusClass = '';
        if (app.status === 'Pending') statusClass = 'status-pending';
        else if (app.status === 'Accepted') statusClass = 'status-accepted';
        else if (app.status === 'Rejected') statusClass = 'status-rejected';

        const li = document.createElement('li');
        li.innerHTML = `
          <span>${app.title} @ ${app.company}</span>
          <span class="${statusClass}">${app.status}</span>
        `;
        applicationStatusList.appendChild(li);
      });
    }

    // Tab switching logic
    function activateTab(selectedTab) {
      if(selectedTab === 'jobs') {
        tabJobsBtn.classList.add('active');
        tabJobsBtn.setAttribute('aria-selected', 'true');
        tabJobsBtn.tabIndex = 0;
        tabInternshipsBtn.classList.remove('active');
        tabInternshipsBtn.setAttribute('aria-selected', 'false');
        tabInternshipsBtn.tabIndex = -1;

        jobsPanel.hidden = false;
        internshipsPanel.hidden = true;
        jobsPanel.focus();
      } else {
        tabInternshipsBtn.classList.add('active');
        tabInternshipsBtn.setAttribute('aria-selected', 'true');
        tabInternshipsBtn.tabIndex = 0;
        tabJobsBtn.classList.remove('active');
        tabJobsBtn.setAttribute('aria-selected', 'false');
        tabJobsBtn.tabIndex = -1;

        internshipsPanel.hidden = false;
        jobsPanel.hidden = true;
        internshipsPanel.focus();
      }
    }

    tabJobsBtn.addEventListener('click', () => activateTab('jobs'));
    tabInternshipsBtn.addEventListener('click', () => activateTab('internships'));

    // Keyboard navigation for tabs (left and right arrow keys)
    const tabButtons = [tabJobsBtn, tabInternshipsBtn];
    tabJobsBtn.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
        e.preventDefault();
        tabInternshipsBtn.focus();
      }
    });
    tabInternshipsBtn.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
        e.preventDefault();
        tabJobsBtn.focus();
      }
    });

    // Initialize
    refreshUI();
    activateTab('jobs');

    // For demo purposes: random update statuses every 60 seconds (optional)
    // You can remove this block if not desired
    /*
    setInterval(() => {
      let changed = false;
      Object.keys(applications).forEach(id => {
        if(applications[id].status === 'Pending') {
          const rand = Math.random();
          if(rand < 0.3) {
            applications[id].status = 'Accepted';
            changed = true;
          } else if(rand < 0.6) {
            applications[id].status = 'Rejected';
            changed = true;
          }
        }
      });
      if(changed) {
        saveApplications();
        renderApplicationStatus();
      }
    }, 60000);
    */

  })();
</script>
</body>
</html>